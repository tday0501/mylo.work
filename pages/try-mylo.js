import Head from "next/head";
import Layout from "../components/organisms/Layout";
import { Box, Grid, TextField, Typography } from "@material-ui/core";
import { SIGN_UP } from "../utils/stringConstants";
import React from "react";
import axios from "axios";
import Button from "../components/molecules/button/Button";

export default function Home() {
  const [email, setEmail] = React.useState("");
  const [name, setName] = React.useState("");

  const handleSubmit = () => {
    if (email) {
      axios
        .post(
          "https://7ikqn7jf39.execute-api.us-east-2.amazonaws.com/dev/beta",
          {
            useremail: email,
            username: name,
          }
        )
        .then(() => {
          setEmail("");
          setName("");
        })
        .catch((e) => {
          //TODO: add toast message on error
          console.log(e);
        });
    }
  };

  return (
    <>
      <Head>
        <title>Mylo - Your space in one place.</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Layout tryMylo={true}>
        <Grid
          alignItems="center"
          container
          direction="column"
          justifyContent="center"
          spacing={4}
        >
          <Grid item>
            <Typography variant="h4">ðŸ‘‹ Welcome!</Typography>
          </Grid>
          <Grid
            alignItems="center"
            container
            direction="column"
            item
            spacing={3}
          >
            <Grid item>
              <Typography variant="h6">
                It's great to have you with us! We're launching very soon.
              </Typography>
            </Grid>
            <Grid
              alignItems="center"
              container
              direction="row"
              item
              justifyContent="center"
            >
              <Typography variant="h5">I,</Typography>
              <span style={{ margin: "-24px 8px 0 8px" }}>
                <TextField
                  label="Your name"
                  onChange={(e) => {
                    setName(e.target.value);
                  }}
                  value={name}
                />
              </span>
              <Typography variant="h5">
                would love a beta invite! Please
              </Typography>
            </Grid>
          </Grid>
          <Grid
            alignItems="center"
            container
            direction="row"
            item
            justifyContent="center"
          >
            <Typography variant="h5">send me an invite @</Typography>
            <span style={{ margin: "-24px 8px 0 8px" }}>
              <TextField
                label="Your email"
                onChange={(e) => {
                  setEmail(e.target.value);
                }}
                onKeyPress={(e) => e.key === "Enter" && handleSubmit()}
                required
                type="email"
                value={email}
              />
            </span>
            <Typography variant="h5">when Mylo is ready.</Typography>
          </Grid>
          <Button
            onClick={handleSubmit}
            style={{
              border: "1px solid #e06277",
              margin: "2em",
              padding: "4px 100px",
            }}
          >
            {SIGN_UP}
          </Button>
        </Grid>
      </Layout>
    </>
  );
}
